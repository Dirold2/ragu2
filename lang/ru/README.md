# Проект Ragu2

RAGU2 - это музыкальный бот для Discord, который позволяет пользователям воспроизводить, приостанавливать и управлять музыкальными треками в голосовых каналах. Бот поддерживает интеграцию с Yandex Music и предоставляет различные команды для управления воспроизведением.

## Localization

[English](../../README.md), [__Русский__](./README.md)

## Плагины в RAGU2

В RAGU2 используется система плагинов, которая позволяет добавлять новые функции и возможности в бота. На данный момент доступны плагины музыкальных платформ:

- Yandex Music

## Установка

1. Клонируйте репозиторий:

   ```bash
   git clone https://github.com/dirold2/ragu2.git
   cd ragu2
   ```

2. Установите зависимости:

   ```bash
   npm install
   ```

3. Создайте файл `.env` в корне проекта и добавьте ваш токен Discord:

   ```env
   # discord_token
   DISCORD_TOKEN="" #https://discord.com/developers/applications

   # bot locale
   BOT_LOCALE="" # default en

   # ffprobe path
   FFPROBE_PATH="" 

   # yandex_api
   YM_USER_ID="" # https://mail.yandex.ru/
   YM_API_KEY="" # https://oauth.yandex.ru/authorize?response_type=token&client_id=23cabbbdc6cd418abb4b39c32c41195d
   ```

## Запуск

Для запуска бота, выполните следующие шаги:

1. Соберите проект:

   ```bash
   pnpm build
   ```

2. Запустите бота:

   ```bash
   pnpm start
   ```

   ________________________

   Для разработки:

   ```bash
   pnpm dev
   ```

## Команды

Бот поддерживает следующие команды:

- `/play <название_трека>` - Воспроизвести трек.
- `/pause` - Приостановить воспроизведение.
- `/skip` - Пропустить текущий трек.
- `/volume <уровень>` - Установить уровень громкости.
- `/shuffle` - Перемешивает очередь.
- `/wave` - Включает "Моя волна" по последнему треку.
- `/queue` - Показать текущую очередь треков.
- `/other` - Показать другие команды.

## Структура проекта

- `.env` - Переменные окружения.
- `src/` - Исходный код бота.
- `src/config/` - Конфигурация бота.
- `src/commands/` - Команды бота.
- `src/services/` - Сервисы для управления логикой бота.
- `src/utils/` - Утилиты и вспомогательные функции.
- `src/locales/` - Файлы локализации для поддержки многоязычности.
- `src/types/` - Типы данных.
- `src/interfaces/` - Интерфейсы.

## TODO

Рабочий процесс:

- [x] Добавить локализацию
- [x] Добавить "wave" для воспроизведения музыки без остановки
- [x] Замена node-cache на lru-cache
- [x] Решение бага с пустым треком на стороне плагина Яндекс Музыки
- [ ] Оптимизация оперативной памяти (Max 270MB)

Плагины:

- [x] Добавить плагин для Yandex Music
- [ ] Добавить плагин для YouTube
- [ ] Добавить плагин для SoundCloud
- [ ] Добавить плагин для Apple Music
- [ ] Добавить плагин для Deezer
- [ ] Добавить плагин для Spotify
